<div class="page-container" [class.loading]="isLoading">

  <div *ngIf="isLoading" class="loading-overlay">
    <div class="spinner"></div>
    <p>Loading page...</p>
  </div>

  <div *ngIf="error && !isLoading" class="error">
    <h2>{{ error }}</h2>
    <p>The page you're looking for could not be found.</p>
    <a routerLink="/" class="btn-home">Go to Homepage</a>
  </div>

  <div *ngIf="!error" class="page-wrapper">

    <app-slider
      *ngIf="sliderImages.length > 0 && !isLoading"
      [images]="sliderImages"
      [autoplay]="true"
      [speed]="5000"
      [showCaptions]="true"
      [showDots]="true"
      [useSize]="'large'">
    </app-slider>

    <article *ngIf="page && !isLoading" class="page">

      <div *ngIf="sliderImages.length === 0 && getFeaturedImage()" class="featured-image">
        <img
          [src]="getFeaturedImage()!.source_url"
          [alt]="getFeaturedImage()!.alt_text || page.title.rendered"
          loading="lazy"
        />
      </div>

      <header class="page-header" *ngIf="sliderImages.length === 0">
        <h1 [innerHTML]="page.title.rendered"></h1>
        <div class="page-meta">
          <time [dateTime]="page.modified">
            Last updated: {{ page.modified | date:'MMMM d, yyyy' }}
          </time>
        </div>
      </header>

      <!-- Display All Card Sections (3 cards per row) -->
      <ng-container *ngIf="showCards && cardSections.length > 0">
        <app-cards-grid
          *ngFor="let section of cardSections; let i = index"
          [cards]="section"
          [columns]="3">
        </app-cards-grid>
      </ng-container>

      <!-- Page Content BEFORE CTA -->
      <div class="page-content" [innerHTML]="pageContentBefore"></div>

      <!-- CTA Section -->
      <app-cta-section style="margin-bottom: -1rem !important;"
        *ngIf="showCta && ctaSection"
        [cta]="ctaSection">
      </app-cta-section>

      <!-- Page Content AFTER CTA -->
      <!-- <div class="page-content" [innerHTML]="pageContentAfter"></div> -->

      <!-- Trustpilot Section -->

      <!-- <app-trustpilot-section

        [trustpilot]="trustpilotSection">
      </app-trustpilot-section> -->

      <!-- Clients & Accreditations Section -->
      <app-clients-accreditations
        *ngIf="showClientsAccreditations && clientsAccreditationsSection"
        [data]="clientsAccreditationsSection">
      </app-clients-accreditations>

    </article>
  </div>
</div>
